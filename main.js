(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){"Escape"===e.key&&n(document.querySelector(".popup_opened"))}function o(e){e.classList.add("popup_opened"),document.addEventListener("keydown",t)}function n(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",t)}function r(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}e.d({},{i8:()=>z,T1:()=>l,cH:()=>_,G5:()=>p,lx:()=>s,OP:()=>u,EG:()=>C,lv:()=>g,bj:()=>w,KM:()=>k,O9:()=>m,oi:()=>O,di:()=>D,tz:()=>q,ED:()=>S,rC:()=>y,z_:()=>x,Ju:()=>J,Ii:()=>h});var c=function(e,t,o){!function(e,t){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(o.inactiveButtonClass),t.removeAttribute("disabled")):(t.classList.add(o.inactiveButtonClass),t.setAttribute("disabled",!0))};function i(e){s.prepend(e)}function a(e,t,n,c,i){var a=u.querySelector(".card").cloneNode(!0),d=a.querySelector(".card__like-number");return a.querySelector(".card__image").src=e,a.querySelector(".card__image").alt=t,a.querySelector(".card__name").textContent=t,d.textContent=n.length,a.querySelector(".card__heart").addEventListener("click",(function(e){e.target.classList.toggle("card__heart_active"),e.target.classList.contains("card__heart_active")?function(e){return fetch("https://nomoreparties.co/v1/plus-cohort-12/cards/likes/".concat(e),{method:"PUT",headers:{authorization:"c2ce2dee-bf82-4d66-8d2d-d2557a6d7d18"}})}(i).then(r).then((function(e){d.textContent=e.likes.length})).catch((function(e){console.log(e)})):function(e){return fetch("https://nomoreparties.co/v1/plus-cohort-12/cards/likes/".concat(e),{method:"DELETE",headers:{authorization:"c2ce2dee-bf82-4d66-8d2d-d2557a6d7d18"}})}(i).then(r).then((function(e){d.textContent=e.likes.length})).catch((function(e){console.log(e)}))})),n.some((function(e){return"1530cef55a8d58a5ead46352"===e._id}))&&(a.querySelector(".card__heart").classList.contains("card__heart_active")||a.querySelector(".card__heart").classList.add("card__heart_active")),"1530cef55a8d58a5ead46352"===c?a.querySelector(".card__delete").addEventListener("click",(function(e){e.target.closest(".card").remove(),function(e){return fetch("https://nomoreparties.co/v1/plus-cohort-12/cards/".concat(e),{method:"DELETE",headers:{authorization:"c2ce2dee-bf82-4d66-8d2d-d2557a6d7d18"}})}(i).then(r).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))})):a.querySelector(".card__delete").remove(),a.querySelector(".card__image").addEventListener("click",(function(){_.src=e,_.alt=t,p.textContent=t,o(l)})),a}var d,u=document.querySelector(".card__template").content,s=document.querySelector(".photos"),l=document.querySelector(".popup_type_photo"),_=l.querySelector(".card-opened__image"),p=l.querySelector(".card-opened__text"),f=l.querySelector(".window__close-button_type_photo"),v=document.querySelector(".window__form_type_profile"),m=v.querySelector(".window__input_type_name"),w=v.querySelector(".window__input_type_info"),h=v.querySelector(".window__save-button"),y=document.querySelector(".profile__name"),S=document.querySelector(".profile__text"),q=document.querySelector(".profile__image"),b=document.querySelector(".profile__edit-button"),C=document.querySelector(".popup_type_edit"),E=document.querySelector(".window__close-button_type_edit"),L=document.querySelector(".window__form_type_add"),g=L.querySelector(".window__input_type_name"),k=L.querySelector(".window__input_type_info"),x=L.querySelector(".window__save-button"),A=document.querySelector(".profile__add-button"),z=document.querySelector(".popup_type_add"),T=document.querySelector(".window__close-button_type_add"),B=document.querySelector(".profile__image_state_hover"),O=document.querySelector(".popup_type_profile-photo"),j=document.querySelector(".window__close-button_type_profile-photo"),P=document.querySelector(".window__form_type_profile-photo"),D=P.querySelector(".window__input_type_info"),J=P.querySelector(".window__save-button");fetch("https://nomoreparties.co/v1/plus-cohort-12/users/me",{headers:{authorization:"c2ce2dee-bf82-4d66-8d2d-d2557a6d7d18"}}).then(r).then((function(e){y.textContent=e.name,S.textContent=e.about,q.src=e.avatar,q.alt=e.name})).catch((function(e){console.log(e)})),fetch("https://nomoreparties.co/v1/plus-cohort-12/cards",{headers:{authorization:"c2ce2dee-bf82-4d66-8d2d-d2557a6d7d18"}}).then(r).then((function(e){e.reverse().forEach((function(e){i(a(e.link,e.name,e.likes,e.owner._id,e._id))}))})).catch((function(e){console.log(e)})),b.addEventListener("click",(function(){o(C),m.value=y.textContent,w.value=S.textContent})),E.addEventListener("click",(function(){n(C)})),C.addEventListener("mousedown",(function(e){var t=e.target;t.closest(".window")||t.closest(".window__form")||n(C)})),v.addEventListener("submit",(function(e){var t,o;h.textContent="Сохранение...",e.preventDefault(),y.textContent=m.value,S.textContent=w.value,(t=m.value,o=w.value,fetch("https://nomoreparties.co/v1/plus-cohort-12/users/me",{method:"PATCH",headers:{authorization:"c2ce2dee-bf82-4d66-8d2d-d2557a6d7d18","Content-Type":"application/json"},body:JSON.stringify({name:t,about:o})})).then(r).then((function(e){h.textContent="Сохранить",console.log(e)})).catch((function(e){console.log(e)})),n(C)})),A.addEventListener("click",(function(){o(z),L.reset();var e=Array.from(z.querySelectorAll(".window__input")),t=z.querySelector(".window__save-button");c(e,t,{formSelector:".window__form",inputSelector:".window__input",submitButtonSelector:".window__save-button",inactiveButtonClass:"window__save-button_inactive",inputErrorClass:"window__input_type_error",errorClass:"window__input-error_active"})})),T.addEventListener("click",(function(){n(z)})),z.addEventListener("mousedown",(function(e){var t=e.target;t.closest(".window")||t.closest(".window__form")||n(z)})),L.addEventListener("submit",(function(e){var t,o;x.textContent="Создание...",e.preventDefault(),(t=g.value,o=k.value,fetch("https://nomoreparties.co/v1/plus-cohort-12/cards",{method:"POST",headers:{authorization:"c2ce2dee-bf82-4d66-8d2d-d2557a6d7d18","Content-Type":"application/json"},body:JSON.stringify({name:t,link:o})})).then(r).then((function(e){x.textContent="Создать",i(a(e.link,e.name,e.likes,e.owner._id,e._id))})).catch((function(e){console.log(e)})),n(z)})),f.addEventListener("click",(function(){n(l)})),l.addEventListener("mousedown",(function(e){e.target.closest(".card-opened")||n(l)})),P.addEventListener("submit",(function(e){var t;J.textContent="Сохранение...",e.preventDefault(),q.src=D.value,q.alt=y,(t=D.value,fetch("https://nomoreparties.co/v1/plus-cohort-12/users/me/avatar",{method:"PATCH",headers:{authorization:"c2ce2dee-bf82-4d66-8d2d-d2557a6d7d18","Content-Type":"application/json"},body:JSON.stringify({avatar:t})})).then(r).then((function(e){J.textContent="Сохранить",console.log(e)})).catch((function(e){console.log(e)})),n(O)})),B.addEventListener("click",(function(){o(O),P.reset();var e=Array.from(O.querySelectorAll(".window__input")),t=O.querySelector(".window__save-button");c(e,t,{formSelector:".window__form",inputSelector:".window__input",submitButtonSelector:".window__save-button",inactiveButtonClass:"window__save-button_inactive",inputErrorClass:"window__input_type_error",errorClass:"window__input-error_active"})})),j.addEventListener("click",(function(){n(O)})),O.addEventListener("mousedown",(function(e){var t=e.target;t.closest(".window")||t.closest(".window__form")||n(O)})),d={formSelector:".window__form",inputSelector:".window__input",submitButtonSelector:".window__save-button",inactiveButtonClass:"window__save-button_inactive",inputErrorClass:"window__input_type_error",errorClass:"window__input-error_active"},Array.from(document.querySelectorAll(d.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var o=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);c(o,n,t),o.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,o){t.validity.valid?function(e,t,o){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(o.inputErrorClass),n.textContent="",n.classList.remove(o.errorClass)}(e,t,o):function(e,t,o,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputErrorClass),r.textContent=o,r.classList.add(n.errorClass)}(e,t,t.validationMessage,o)}(e,r,t),c(o,n,t)}))}))}(e,d)}))})();